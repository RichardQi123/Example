(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(5882)}])},5882:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return S}});var l=t(5893),a=t(7294),i=t(3495),n=t(8868);function r(){let e=(0,a.useRef)(!1);return(0,n.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var c=t(2074),o=t(240),d=t(6681);class m extends a.Component{getSnapshotBeforeUpdate(e){let s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=s.offsetHeight||0,e.width=s.offsetWidth||0,e.top=s.offsetTop,e.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function h({children:e,isPresent:s}){let t=(0,a.useId)(),l=(0,a.useRef)(null),i=(0,a.useRef)({width:0,height:0,top:0,left:0});return(0,a.useInsertionEffect)(()=>{let{width:e,height:a,top:n,left:r}=i.current;if(s||!l.current||!e||!a)return;l.current.dataset.motionPopId=t;let c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${a}px !important;
            top: ${n}px !important;
            left: ${r}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[s]),a.createElement(m,{isPresent:s,childRef:l,sizeRef:i},a.cloneElement(e,{ref:l}))}let x=({children:e,initial:s,isPresent:t,onExitComplete:l,custom:i,presenceAffectsLayout:n,mode:r})=>{let c=(0,d.h)(u),m=(0,a.useId)(),x=(0,a.useMemo)(()=>({id:m,initial:s,isPresent:t,custom:i,onExitComplete:e=>{for(let s of(c.set(e,!0),c.values()))if(!s)return;l&&l()},register:e=>(c.set(e,!1),()=>c.delete(e))}),n?void 0:[t]);return(0,a.useMemo)(()=>{c.forEach((e,s)=>c.set(s,!1))},[t]),a.useEffect(()=>{t||c.size||!l||l()},[t]),"popLayout"===r&&(e=a.createElement(h,{isPresent:t},e)),a.createElement(o.O.Provider,{value:x},e)};function u(){return new Map}var p=t(5364),f=t(5487);let g=e=>e.key||"",j=({children:e,custom:s,initial:t=!0,onExitComplete:l,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:d="sync"})=>{var m;(0,f.k)(!i,"Replace exitBeforeEnter with mode='wait'");let h=(0,a.useContext)(p.p).forceRender||function(){let e=r(),[s,t]=(0,a.useState)(0),l=(0,a.useCallback)(()=>{e.current&&t(s+1)},[s]);return[(0,a.useCallback)(()=>c.Wi.postRender(l),[l]),s]}()[0],u=r(),j=function(e){let s=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&s.push(e)}),s}(e),b=j,w=(0,a.useRef)(new Map).current,y=(0,a.useRef)(b),v=(0,a.useRef)(new Map).current,N=(0,a.useRef)(!0);if((0,n.L)(()=>{N.current=!1,function(e,s){e.forEach(e=>{let t=g(e);s.set(t,e)})}(j,v),y.current=b}),m=()=>{N.current=!0,v.clear(),w.clear()},(0,a.useEffect)(()=>()=>m(),[]),N.current)return a.createElement(a.Fragment,null,b.map(e=>a.createElement(x,{key:g(e),isPresent:!0,initial:!!t&&void 0,presenceAffectsLayout:o,mode:d},e)));b=[...b];let E=y.current.map(g),k=j.map(g),C=E.length;for(let e=0;e<C;e++){let s=E[e];-1!==k.indexOf(s)||w.has(s)||w.set(s,void 0)}return"wait"===d&&w.size&&(b=[]),w.forEach((e,t)=>{if(-1!==k.indexOf(t))return;let i=v.get(t);if(!i)return;let n=E.indexOf(t),r=e;r||(r=a.createElement(x,{key:g(i),isPresent:!1,onExitComplete:()=>{w.delete(t);let e=Array.from(v.keys()).filter(e=>!k.includes(e));if(e.forEach(e=>v.delete(e)),y.current=j.filter(s=>{let l=g(s);return l===t||e.includes(l)}),!w.size){if(!1===u.current)return;h(),l&&l()}},custom:s,presenceAffectsLayout:o,mode:d},i),w.set(t,r)),b.splice(n,0,r)}),b=b.map(e=>{let s=e.key;return w.has(s)?e:a.createElement(x,{key:g(e),isPresent:!0,presenceAffectsLayout:o,mode:d},e)}),a.createElement(a.Fragment,null,w.size?b:b.map(e=>(0,a.cloneElement)(e)))};var b=t(4052),w=t(1941);let y={melbourne:{center:{lat:-37.8136,lng:144.9631},zoom:13},sydney:{center:{lat:-33.8688,lng:151.2093},zoom:13}};var v=e=>{let{city:s,onLocationSelect:t,onPlaceSelect:n,selectedLocation:r,onToggleFavorite:c,isFavorite:o}=e,{t:d}=(0,w.Z)(),m=(0,a.useRef)(null),h=(0,a.useRef)(null),x=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(!m.current)return;let e=new google.maps.Map(m.current,{center:y[s].center,zoom:y[s].zoom,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]});h.current=e,e.addListener("click",e=>{e.latLng&&t({lat:e.latLng.lat(),lng:e.latLng.lng()})});let l=new google.maps.places.SearchBox(document.getElementById("search-box"));return l.addListener("places_changed",()=>{let e=l.getPlaces();e&&e.length>0&&n(e[0])}),()=>{google.maps.event.clearInstanceListeners(e)}},[s,t,n]),(0,a.useEffect)(()=>{if(!h.current||!r)return;x.current&&x.current.setMap(null);let e=new google.maps.Marker({position:r,map:h.current,animation:google.maps.Animation.DROP});x.current=e,h.current.panTo(r)},[r]),(0,l.jsxs)("div",{className:"relative w-full h-full bg-gray-100",children:[(0,l.jsx)("div",{className:"absolute inset-0",children:(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,l.jsx)("p",{className:"text-gray-500",children:d("map.loading")})})}),r&&(0,l.jsx)(i.E.div,{initial:{scale:0},animate:{scale:1},className:"absolute transform -translate-x-1/2 -translate-y-1/2",style:{left:"50%",top:"50%"},children:(0,l.jsx)(b.i63,{className:"w-8 h-8 ".concat(o?"text-red-500 fill-current":"text-blue-500")})}),(0,l.jsx)("div",{className:"absolute top-4 right-4 flex flex-col space-y-2",children:(0,l.jsx)(i.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:c,className:"p-2 bg-white rounded-full shadow-lg",children:(0,l.jsx)(b.i63,{className:"w-6 h-6 ".concat(o?"text-red-500 fill-current":"text-gray-500")})})})]})},N=e=>{let{favorites:s,onSelect:t,onRemove:a}=e,{t:n}=(0,w.Z)(),r=e=>{t({id:e.id,name:e.name,lat:e.lat,lng:e.lng,rating:0,address:e.address||"",openingHours:[],phone:"",website:"",photos:[]})};return(0,l.jsx)("div",{className:"h-full bg-white overflow-y-auto",children:(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:n("favorites.title")}),(0,l.jsx)(j,{children:0===s.length?(0,l.jsxs)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-8",children:[(0,l.jsx)(b.$aX,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-500",children:n("favorites.empty")})]}):(0,l.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,l.jsxs)(i.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex items-center justify-between p-3 bg-white rounded-lg shadow-sm",children:[(0,l.jsxs)("div",{className:"flex-1 cursor-pointer",onClick:()=>r(e),children:[(0,l.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),e.address&&(0,l.jsx)("p",{className:"text-sm text-gray-500",children:e.address})]}),(0,l.jsx)(i.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>a(e),className:"p-2 text-gray-400 hover:text-red-500",children:(0,l.jsx)(b.q5L,{className:"w-5 h-5"})})]},e.id))})})]})})},E=e=>{let{onFilterChange:s}=e,{t}=(0,w.Z)(),[n,r]=(0,a.useState)([]),[c,o]=(0,a.useState)(!1),d=[{id:"restaurant",label:t("filters.restaurant"),icon:"FiCoffee"},{id:"cafe",label:t("filters.cafe"),icon:"FiCoffee"},{id:"bar",label:t("filters.bar"),icon:"FiCoffee"},{id:"park",label:t("filters.park"),icon:"FiCoffee"},{id:"museum",label:t("filters.museum"),icon:"FiCoffee"},{id:"shopping",label:t("filters.shopping"),icon:"FiCoffee"}],m=e=>{let t=n.some(s=>s.id===e.id)?n.filter(s=>s.id!==e.id):[...n,e];r(t),s(t)};return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(!c),className:"flex items-center space-x-2 px-4 py-2 rounded-full ".concat(n.length>0?"bg-blue-500 text-white":"bg-gray-100 text-gray-700"),children:[(0,l.jsx)(b.Ihx,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:t("filters.title")}),n.length>0&&(0,l.jsx)("span",{className:"bg-white text-blue-500 rounded-full px-2 py-1 text-sm",children:n.length})]}),(0,l.jsx)(j,{children:c&&(0,l.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute top-full left-0 mt-2 bg-white rounded-lg shadow-lg p-4 w-64 z-10",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("h3",{className:"font-medium text-gray-900",children:t("filters.title")}),(0,l.jsx)("button",{onClick:()=>o(!1),className:"p-1 rounded-full hover:bg-gray-100",children:(0,l.jsx)(b.q5L,{className:"w-5 h-5 text-gray-500"})})]}),(0,l.jsx)("div",{className:"grid grid-cols-2 gap-2",children:d.map(e=>(0,l.jsx)(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>m(e),className:"flex items-center space-x-2 px-3 py-2 rounded-full text-sm ".concat(n.some(s=>s.id===e.id)?"bg-blue-500 text-white":"bg-gray-100 text-gray-700"),children:(0,l.jsx)("span",{children:e.label})},e.id))})]})})]})},k=e=>{let{recommendations:s,onSelect:t}=e,{t:a}=(0,w.Z)(),n=e=>{t({id:e.id,name:e.name,lat:e.lat,lng:e.lng,rating:e.rating,address:"",openingHours:[],phone:"",website:"",photos:[e.image],description:e.description,tags:e.tags})};return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a("recommendations.title")}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>(0,l.jsxs)(i.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(e),className:"bg-white rounded-lg shadow-sm overflow-hidden cursor-pointer",children:[(0,l.jsxs)("div",{className:"relative h-48",children:[(0,l.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"}),(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),(0,l.jsx)("div",{className:"absolute top-4 right-4",children:(0,l.jsx)(i.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 bg-white rounded-full shadow-lg",children:(0,l.jsx)(b.$aX,{className:"w-5 h-5 text-gray-500"})})})]}),(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:e.name}),(0,l.jsxs)("div",{className:"flex items-center mb-2",children:[(0,l.jsxs)("span",{className:"text-yellow-500 mr-2",children:["★ ",e.rating]}),(0,l.jsxs)("span",{className:"text-gray-500",children:[e.distance," km"]})]}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:e.tags.map(e=>(0,l.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs",children:e},e))})]})]},e.id))})]})},C=e=>{var s;let{place:t,onClose:n,onFavorite:r,isFavorite:c}=e,{t:o}=(0,w.Z)(),[d,m]=(0,a.useState)("overview"),[h,x]=(0,a.useState)(0),[u,p]=(0,a.useState)(!1),f=[{id:"overview",label:o("placeDetails.overview"),icon:"FiInfo"},{id:"photos",label:o("placeDetails.photos"),icon:"FiImage"},{id:"reviews",label:o("placeDetails.reviews"),icon:"FiStar"},{id:"tips",label:o("placeDetails.tips"),icon:"FiTag"}];return(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,l.jsxs)("div",{className:"relative h-48",children:[(0,l.jsx)("img",{src:t.photos[0],alt:t.name,className:"w-full h-full object-cover"}),(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),(0,l.jsxs)("div",{className:"absolute top-4 right-4 flex space-x-2",children:[(0,l.jsx)(i.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:r,className:"p-2 bg-white rounded-full shadow-lg",children:(0,l.jsx)(b.$aX,{className:"w-6 h-6 ".concat(c?"text-red-500 fill-current":"text-gray-500")})}),(0,l.jsx)(i.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:n,className:"p-2 bg-white rounded-full shadow-lg",children:(0,l.jsx)(b.q5L,{className:"w-6 h-6 text-gray-500"})})]})]}),(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-2",children:t.name}),(0,l.jsxs)("div",{className:"flex items-center mb-4",children:[(0,l.jsxs)("span",{className:"text-yellow-500 mr-2",children:["★ ",t.rating]}),(0,l.jsx)("span",{className:"text-gray-500",children:t.address})]}),(0,l.jsx)("div",{className:"flex space-x-4 mb-6",children:f.map(e=>(0,l.jsx)("button",{onClick:()=>m(e.id),className:"px-4 py-2 rounded-full ".concat(d===e.id?"bg-blue-500 text-white":"bg-gray-100 text-gray-700"),children:e.label},e.id))}),(0,l.jsx)(j,{mode:"wait",children:(0,l.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:["overview"===d&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("h3",{className:"font-semibold",children:o("placeDetails.description")}),(0,l.jsxs)("p",{className:"text-gray-700",children:[u?t.description:"".concat(null===(s=t.description)||void 0===s?void 0:s.slice(0,150),"..."),t.description&&t.description.length>150&&(0,l.jsx)("button",{onClick:()=>p(!u),className:"text-blue-500 ml-2",children:o(u?"common.showLess":"common.showMore")})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("h3",{className:"font-semibold",children:o("placeDetails.openingHours")}),(0,l.jsx)("ul",{className:"space-y-1",children:t.openingHours.map((e,s)=>(0,l.jsx)("li",{className:"text-gray-700",children:e},s))})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("h3",{className:"font-semibold",children:o("placeDetails.contact")}),(0,l.jsx)("p",{className:"text-gray-700",children:t.phone}),(0,l.jsx)("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:t.website})]})]}),"photos"===d&&(0,l.jsx)("div",{className:"grid grid-cols-2 gap-4",children:t.photos.map((e,s)=>(0,l.jsx)("img",{src:e,alt:"".concat(t.name," photo ").concat(s+1),className:"w-full h-32 object-cover rounded-lg"},s))}),"reviews"===d&&(0,l.jsx)("div",{className:"space-y-4"}),"tips"===d&&(0,l.jsx)("div",{className:"space-y-4"})]},d)})]}),(0,l.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 flex justify-between",children:[(0,l.jsxs)(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center space-x-2 px-4 py-2 bg-blue-500 text-white rounded-full",children:[(0,l.jsx)(b.t$,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:o("placeDetails.navigate")})]}),(0,l.jsxs)(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-full",children:[(0,l.jsx)(b.PMT,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:o("placeDetails.share")})]})]})]})},T=()=>{let{language:e,setLanguage:s,t}=(0,w.Z)();return(0,l.jsx)(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{s("en"===e?"zh":"en")},className:"fixed top-4 right-4 p-3 bg-white rounded-full shadow-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":t("common.switchLanguage"),children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(b.RsK,{className:"w-5 h-5 text-gray-600"}),(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"en"===e?"中文":"English"})]})})},S=()=>{let{t:e}=(0,w.Z)(),[s,t]=(0,a.useState)("melbourne"),[n,r]=(0,a.useState)(null),[c,o]=(0,a.useState)(null),[d,m]=(0,a.useState)([]),[h,x]=(0,a.useState)(!1),[u,p]=(0,a.useState)(""),[f,g]=(0,a.useState)(!1),[y,S]=(0,a.useState)([]),L=e=>{o(e),r({lat:e.lat,lng:e.lng})},R=()=>{if(g(!f),c){let e={id:c.id,name:c.name,lat:c.lat,lng:c.lng,address:c.address};f?S(y.filter(s=>s.id!==e.id)):S([...y,e])}};return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)(T,{}),(0,l.jsx)("nav",{className:"bg-white shadow-sm",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"flex justify-between h-16",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:e("common.appName")}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("button",{onClick:()=>t("melbourne"),className:"px-3 py-1 rounded-full text-sm ".concat("melbourne"===s?"bg-blue-500 text-white":"bg-gray-100 text-gray-700"),children:"Melbourne"}),(0,l.jsx)("button",{onClick:()=>t("sydney"),className:"px-3 py-1 rounded-full text-sm ".concat("sydney"===s?"bg-blue-500 text-white":"bg-gray-100 text-gray-700"),children:"Sydney"})]})]}),(0,l.jsx)("div",{className:"flex items-center space-x-4",children:(0,l.jsx)(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>x(!h),className:"p-2 rounded-full hover:bg-gray-100",children:h?(0,l.jsx)(b.q5L,{className:"w-6 h-6"}):(0,l.jsx)(b.cur,{className:"w-6 h-6"})})})]})})}),(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,l.jsx)("div",{className:"flex-1 h-[calc(100vh-8rem)] bg-white rounded-lg shadow-sm overflow-hidden",children:(0,l.jsx)(v,{city:s,onLocationSelect:e=>{r(e),o(null)},onPlaceSelect:L,selectedLocation:n,onToggleFavorite:R,isFavorite:f})}),(0,l.jsx)(j,{children:h&&(0,l.jsx)(i.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"w-full lg:w-80 bg-white rounded-lg shadow-sm overflow-hidden",children:(0,l.jsx)(N,{favorites:y,onSelect:L,onRemove:e=>{S(y.filter(s=>s.id!==e.id))}})})})]}),(0,l.jsx)("div",{className:"mt-6",children:c?(0,l.jsx)(C,{place:c,onClose:()=>o(null),onFavorite:R,isFavorite:f}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)(E,{onFilterChange:e=>{m(e)}}),(0,l.jsx)(k,{recommendations:[],onSelect:L})]})})]}),(0,l.jsxs)("div",{className:"fixed bottom-4 right-4 flex flex-col space-y-2",children:[(0,l.jsx)(i.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-4 bg-white rounded-full shadow-lg hover:bg-gray-50",children:(0,l.jsx)(b.MIl,{className:"w-6 h-6"})}),(0,l.jsx)(i.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-4 bg-white rounded-full shadow-lg hover:bg-gray-50",children:(0,l.jsx)(b.tBf,{className:"w-6 h-6"})})]})]})}}},function(e){e.O(0,[152,376,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);